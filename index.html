<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Az ember trag√©di√°ja - Interakt√≠v Jegyzet (√ñsszes sz√≠n)</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        #menu {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
            text-align: center;
        }
        #menu button {
            padding: 10px 15px;
            margin: 5px; /* Added some margin for better wrapping on small screens */
            cursor: pointer;
            background-color: #5cb85c;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }
        #menu button:hover {
            background-color: #4cae4c;
        }
        .view {
            margin-top: 20px;
        }
        #mapView h2, #timelineView h2 {
            text-align: center;
            color: #337ab7;
        }
        #timelineView ul li, #locations button { /* Combined style for buttons */
            display: block;
            width: 95%;
            max-width: 350px;
            margin: 10px auto;
            padding: 12px;
            background-color: #f0ad4e;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            text-align: center;
            box-sizing: border-box;
        }
        #timelineView ul li:hover, #locations button:hover {
            background-color: #ec971f;
        }
        #timelineView ul {
            list-style-type: none;
            padding: 0;
        }
        #sceneDetailView {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        #sceneDetailView h3 {
            color: #d9534f;
            margin-top: 0;
        }
        #sceneDetailView .action-buttons {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
        }
        #sceneDetailView .action-buttons button {
             padding: 8px 12px;
             color: white;
             border: none;
             border-radius: 5px;
             cursor: pointer;
        }
        #sceneDetailView .back-button {
            background-color: #5bc0de;
        }
        #sceneDetailView .back-button:hover {
            background-color: #46b8da;
        }
        #sceneDetailView .tts-button {
            background-color: #6f42c1;
        }
        #sceneDetailView .tts-button:hover {
            background-color: #5a32a3;
        }
        .scene-content-item h4 { color: #337ab7; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-top:0;}
        .scene-content-item h5 { color: #555; margin-top: 15px; margin-bottom: 5px;}
        .scene-content-item p, .scene-content-item ul { margin-bottom: 10px; }
        .scene-content-item ul { margin-left: 20px; }
        .scene-content-item strong { color: #d9534f; }
        .scene-content-item em { font-style: italic; color: #555; }
        .scene-content-item .quote { font-style: italic; color: #006400; margin-left: 20px; border-left: 3px solid #006400; padding-left: 10px;}
        #interactiveMap {
            height: 450px;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom:20px;
        }
        .map-info-text {
            font-style: italic;
            color: #777;
            text-align: center;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header style="text-align:center; margin-bottom:20px;">
            <h1>Az ember trag√©di√°ja - Interakt√≠v Jegyzet</h1>
            <p>Mad√°ch Imre m≈±v√©nek √∂sszes sz√≠ne</p>
        </header>

        <div id="menu">
            <button onclick="showView('mapView')">üó∫Ô∏è T√©rk√©p N√©zet</button>
            <button onclick="showView('timelineView')">‚è≥ Id≈ëvonal N√©zet</button>
        </div>

        <div id="mapView" class="view">
            <h2>T√©rk√©p N√©zet</h2>
            <p class="map-info-text">Kattints egy jel√∂l≈ëre a t√©rk√©pen a helysz√≠n r√©szletei√©rt! Nem minden sz√≠nnek van konkr√©t t√©rk√©pes jel√∂l≈ëje (pl. Menny, ≈∞r).</p>
            <div id="interactiveMap"></div>
            <div id="locations">
                <!-- Gombok olyan sz√≠nekhez, amiknek nincs t√©rk√©pjel√∂l≈ëje, vagy ha a t√©rk√©p nem t√∂lt be -->
                <button onclick="showSceneDetails('menny')">1. Sz√≠n: A Mennyben (Nincs t√©rk√©pjel√∂l≈ë)</button>
                <button onclick="showSceneDetails('ur')">13. Sz√≠n: Az ≈∞rben (Nincs t√©rk√©pjel√∂l≈ë)</button>
            </div>
        </div>

        <div id="timelineView" class="view" style="display:none;">
            <h2>Id≈ëvonal N√©zet</h2>
            <ul>
                <li onclick="showSceneDetails('menny')">üìú 1. Sz√≠n: A Mennyben</li>
                <li onclick="showSceneDetails('paradicsom')">üìú 2. Sz√≠n: A Paradicsomban</li>
                <li onclick="showSceneDetails('paradicsomonkivul_elom')">üìú 3. Sz√≠n: A Paradicsomon k√≠v√ºl (√Ålom el≈ëtt)</li>
                <li onclick="showSceneDetails('egyiptom')">üìú 4. Sz√≠n: Egyiptom</li>
                <li onclick="showSceneDetails('athen')">üìú 5. Sz√≠n: Ath√©n</li>
                <li onclick="showSceneDetails('roma')">üìú 6. Sz√≠n: R√≥ma</li>
                <li onclick="showSceneDetails('konstantinapoly')">üìú 7. Sz√≠n: Konstantin√°poly</li>
                <li onclick="showSceneDetails('praga1')">üìú 8. Sz√≠n: Pr√°ga I.</li>
                <li onclick="showSceneDetails('parizs')">üìú 9. Sz√≠n: P√°rizs</li>
                <li onclick="showSceneDetails('praga2')">üìú 10. Sz√≠n: Pr√°ga II.</li>
                <li onclick="showSceneDetails('london')">üìú 11. Sz√≠n: London</li>
                <li onclick="showSceneDetails('falanszter')">üìú 12. Sz√≠n: A Falanszter</li>
                <li onclick="showSceneDetails('ur')">üìú 13. Sz√≠n: Az ≈∞rben</li>
                <li onclick="showSceneDetails('eszkimo')">üìú 14. Sz√≠n: Az eszkim√≥k f√∂ldj√©n</li>
                <li onclick="showSceneDetails('paradicsomonkivul_utan')">üìú 15. Sz√≠n: A Paradicsomon k√≠v√ºl (√Ålom ut√°n)</li>
            </ul>
        </div>

        <div id="sceneDetailView" style="display:none;">
            <div class="action-buttons">
                <button class="back-button" onclick="goBack()">‚Ü©Ô∏è Vissza</button>
                <button class="tts-button" onclick="speakSceneContent()">üîä Felolvas√°s (Backend sz√ºks√©ges)</button>
            </div>
            <h3 id="sceneTitleDetail"></h3>
            <div id="sceneContentDetail">
                <!-- Content will be injected here -->
            </div>
            <audio id="audioPlayer" controls style="width: 100%; margin-top: 15px;"></audio>
        </div>

        <div id="sceneStore" style="display:none;">
            <div id="content-menny" class="scene-content-item">
                <h4>1. Sz√≠n: A Mennyben</h4>
                <p><strong>Helysz√≠n:</strong> A Menny.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>Az √ör:</strong> A teremt≈ë, aki el√©gedett m≈±v√©vel.</li>
                    <li><strong>Angyalok kara (G√°bor, Mih√°ly, Rafael vezet√©s√©vel):</strong> Dics≈ë√≠tik a teremt√©st, mindegyik√ºk m√°s aspektus√°t emelve ki (eszme, er≈ë, j√≥s√°g).</li>
                    <li><strong>Lucifer:</strong> A tagad√°s szelleme, aki kritik√°val illeti a teremt√©st, hi√°nyolja az √∂sszhangot √©s az egy√©n √∂nelv≈±s√©g√©t hirdeti. Szembesz√°ll az √örral.</li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>A teremt√©s t√∂k√©letess√©ge vs. a tagad√°s √©s a kritika joga. Az isteni vil√°grend √©s a disszonancia megjelen√©se.</p>
                <h5>Cselekm√©ny √©s konfliktus:</h5>
                <p>Az angyalok dics≈ë√≠tik Istent √©s a vil√°got. Lucifer egyed√ºlik√©nt nem magasztalja a teremt√©st, hanem annak hi√°nyoss√°gaira, az anyag √©s a szellem k√∂z√∂tti fesz√ºlts√©gre mutat r√°. K√©ts√©gbe vonja az ember t√∂k√©letess√©g√©t √©s boldogs√°g√°t. Az √ör, hogy Lucifer kritik√°ja ne csak romboljon, hanem r√©sze legyen a vil√°gnak ("A tagad√°s is, tudom, eszk√∂z√∂d / Hogy √©ltess √©s teremts"), neki adja a tud√°s √©s az √≠t√©let f√°j√°t a Paradicsomban.</p>
                <h5>√Åd√°m (m√©g nem jelenik meg, de sorsa itt kezd≈ëdik):</h5>
                <p>A sz√≠n megalapozza a dr√°mai k√ºzdelmet, amelynek √Åd√°m lesz a f≈ëszerepl≈ëje. Lucifer elhat√°rozza, hogy megk√≠s√©rti az embert.</p>
            </div>

            <div id="content-paradicsom" class="scene-content-item">
                <h4>2. Sz√≠n: A Paradicsomban</h4>
                <p><strong>Helysz√≠n:</strong> Az √âdenkert.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>√Åd√°m:</strong> Az els≈ë ember, boldog tudatlans√°gban √©l.</li>
                    <li><strong>√âva:</strong> Az els≈ë n≈ë, √Åd√°m t√°rsa.</li>
                    <li><strong>Lucifer:</strong> K√≠gy√≥ k√©p√©ben (vagy an√©lk√ºl) jelenik meg, hogy megk√≠s√©rtse az emberp√°rt.</li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>Az √°rtatlans√°g, a tudatlans√°g boldogs√°ga vs. a tud√°sv√°gy, a fejl≈ëd√©s ir√°nti √∂szt√∂n. A b≈±nbees√©s lehet≈ës√©ge.</p>
                <h5>Cselekm√©ny √©s konfliktus:</h5>
                <p>√Åd√°m √©s √âva gondtalanul √©lnek a Paradicsomban, az √ör gondvisel√©s√©ben. Lucifer megjelenik, √©s a tud√°s √≠g√©ret√©vel, az "istenekk√© v√°l√°s" cs√°b√≠t√°s√°val k√≠s√©rti meg ≈ëket. El√ºlteti benn√ºk a k√©ts√©get √©s a v√°gyat a tiltott gy√ºm√∂lcs ir√°nt. √âva k√≠v√°ncsis√°ga √©s √Åd√°m tud√°sv√°gya er≈ësebbnek bizonyul az √ör parancs√°n√°l. Mindketten esznek a tud√°s f√°j√°nak gy√ºm√∂lcs√©b≈ël.</p>
                <h5>√Åd√°m √©s √âva felismer√©se/√°llapota a sz√≠n v√©g√©n:</h5>
                <p>Felny√≠lik a szem√ºk, elvesz√≠tik √°rtatlans√°gukat. Megismerik a j√≥t √©s a rosszat, de ezzel egy√ºtt a sz√©gyent, a f√©lelmet √©s a haland√≥s√°got is. Az √ör k√©rd≈ëre vonja ≈ëket, √©s ki≈±zi ≈ëket a Paradicsomb√≥l.</p>
            </div>

            <div id="content-paradicsomonkivul_elom" class="scene-content-item">
                <h4>3. Sz√≠n: A Paradicsomon k√≠v√ºl (√Ålom el≈ëtt)</h4>
                <p><strong>Helysz√≠n:</strong> Kop√°r t√°j a Paradicsomon k√≠v√ºl.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>√Åd√°m:</strong> A f√∂ld√∂n k√ºzd≈ë ember, aki munk√°val pr√≥b√°lja fenntartani mag√°t √©s csal√°dj√°t.</li>
                    <li><strong>√âva:</strong> √Åd√°m t√°rsa a sz√°m≈±zet√©sben, igyekszik otthonoss√° tenni k√∂rnyezet√ºket.</li>
                    <li><strong>Lucifer:</strong> Megjelenik, hogy tov√°bb fokozza √Åd√°m ki√°br√°ndults√°g√°t.</li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>A f√∂ldi l√©t neh√©zs√©gei, a munka, a k√ºzdelem. Az ember v√°gya a tud√°sra, a j√∂v≈ë megismer√©s√©re.</p>
                <h5>Cselekm√©ny √©s konfliktus:</h5>
                <p>√Åd√°m √©s √âva a Paradicsomon k√≠v√ºli mostoha vil√°gban √©lnek. √Åd√°m vad√°szik, kunyh√≥t √©p√≠t, √âva gy√ºm√∂lcs√∂t gy≈±jt, otthonukat sz√©p√≠ti. √Åd√°mban felmer√ºl a k√ºzdelem √©rtelme √©s a j√∂v≈ë ir√°nti k√≠v√°ncsis√°g. Lucifer megjelenik, √©s felaj√°nlja √Åd√°mnak, hogy √°lmot bocs√°t r√°, melyben megmutatja neki az emberis√©g j√∂v≈ëj√©t, hogy l√°ssa, mi√©rt k√ºzd. √Åd√°m elfogadja az aj√°nlatot, rem√©lve, hogy √©rtelmet tal√°l.</p>
                <h5>√Åd√°m √©s √âva √°llapota a sz√≠n v√©g√©n:</h5>
                <p>√Åd√°m √©s √âva elalszanak. Lucifer √°lmot bocs√°t √Åd√°mra. √âva innent≈ël (jelk√©pesen) alszik eg√©szen a 15. sz√≠nig, m√≠g √Åd√°m v√©gig√°lmodja a t√∂rt√©nelmi korokat.</p>
            </div>

            <!-- 4-10. sz√≠n tartalma (m√°r megl√©v≈ë) -->
            <div id="content-egyiptom" class="scene-content-item"><h4>4. Sz√≠n: Egyiptom (T√©zis)</h4> <!-- ... (tartalom v√°ltozatlan) ... --> </div>
            <div id="content-athen" class="scene-content-item"><h4>5. Sz√≠n: Ath√©n (Antit√©zis)</h4> <!-- ... (tartalom v√°ltozatlan) ... --> </div>
            <div id="content-roma" class="scene-content-item"><h4>6. Sz√≠n: R√≥ma (Szint√©zis fel√©...)</h4> <!-- ... (tartalom v√°ltozatlan) ... --> </div>
            <div id="content-konstantinapoly" class="scene-content-item"><h4>7. Sz√≠n: Konstantin√°poly (Biz√°nc)</h4> <!-- ... (tartalom v√°ltozatlan) ... --> </div>
            <div id="content-praga1" class="scene-content-item"><h4>8. Sz√≠n: Pr√°ga I.</h4> <!-- ... (tartalom v√°ltozatlan) ... --> </div>
            <div id="content-parizs" class="scene-content-item"><h4>9. Sz√≠n: P√°rizs ("√Ålom az √°lomban")</h4> <!-- ... (tartalom v√°ltozatlan) ... --> </div>
            <div id="content-praga2" class="scene-content-item"><h4>10. Sz√≠n: Pr√°ga II.</h4> <!-- ... (tartalom v√°ltozatlan) ... --> </div>

            <div id="content-london" class="scene-content-item">
                <h4>11. Sz√≠n: London</h4>
                <p><strong>Kor √©s helysz√≠n:</strong> A 19. sz√°zadi kapitalista London, az ipari forradalom kora.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>√Åd√°m:</strong> Ki√°br√°ndult, id≈ës√∂d≈ë polg√°rk√©nt szeml√©li a ny√ºzsg≈ë, de ellentmond√°sos v√°rost.</li>
                    <li><strong>√âva:</strong> T√∂bb alakban is megjelenik: el≈ëkel≈ë d√°ma, majd elszeg√©nyedett, utc√°ra ker√ºlt l√°ny (vir√°g√°rus, majd prostitu√°lt).</li>
                    <li><strong>Lucifer:</strong> √Åd√°m k√≠s√©r≈ëje, aki a kapitalizmus vissz√°ss√°gait mutatja be.</li>
                    <li><strong>Koldusok, munk√°sok, t≈ëk√©sek, v√°s√°ri √°rusok, s√≠r√°s√≥k.</strong></li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>A "szabad verseny" kapitalizmusa, az ipari fejl≈ëd√©s, a halad√°s mindenhat√≥s√°ga vs. t√°rsadalmi egyenl≈ëtlens√©gek, elidegened√©s, az emberi √©rt√©kek h√°tt√©rbe szorul√°sa.</p>
                <h5>Cselekm√©ny √©s konfliktus:</h5>
                <p>A sz√≠n egy ny√ºzsg≈ë londoni v√°s√°rt√©r forgatag√°ban j√°tsz√≥dik, ahol a "minden elad√≥" elv uralkodik. √Åd√°m l√°tja a gazdags√°g √©s a m√©lys√©ges szeg√©nys√©g √©les ellent√©t√©t. A tudom√°ny √©s a technika fejl≈ëd√©se ellen√©re az emberi kapcsolatok ki√ºresednek, a p√©nz v√°lik a legf≈ëbb √©rt√©km√©r≈ëv√©. A munk√°sok kizs√°km√°nyol√°sa, az elidegened√©s √©s a t√°rsadalmi igazs√°gtalans√°gok uralkodnak. √âva sorsa a t√°rsadalmi lecs√∫sz√°st p√©ld√°zza. A s√≠r√°s√≥k a hal√°l egyetemess√©g√©t √©s a f√∂ldi hi√∫s√°gokat hangs√∫lyozz√°k.</p>
                <h5>√Åd√°m felismer√©se/v√°gya a sz√≠n v√©g√©n:</h5>
                <p>√Åd√°m m√©lys√©gesen ki√°br√°ndul ebb≈ël a vil√°gb√≥l, ahol a halad√°s nem hozott boldogs√°got, csak √∫jabb szenved√©st √©s igazs√°gtalans√°got. Undorodik a p√©nz hatalm√°t√≥l √©s az emberi √©rz√©sek el√ºzletiesed√©s√©t≈ël. V√°gyik egy olyan t√°rsadalomra, ahol a tudom√°ny √©s a racionalit√°s tal√°n val√≥di rendet √©s igazs√°goss√°got teremt, ez vezeti a Falanszter v√≠zi√≥j√°hoz.</p>
            </div>

            <div id="content-falanszter" class="scene-content-item">
                <h4>12. Sz√≠n: A Falanszter</h4>
                <p><strong>Kor √©s helysz√≠n:</strong> A t√°voli j√∂v≈ë, egy tudom√°nyosan megszervezett, ut√≥pisztikus t√°rsadalom.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>√Åd√°m:</strong> Kezdetben csod√°lattal, majd kritik√°val szeml√©li a "t√∂k√©letes" vil√°got.</li>
                    <li><strong>√âva:</strong> Munk√°sl√°ny, akit a rendszer √Åd√°m mell√© jel√∂l.</li>
                    <li><strong>Lucifer:</strong> Cinikusan r√°vil√°g√≠t a rendszer vissz√°ss√°gaira.</li>
                    <li><strong>Tud√≥s:</strong> A Falanszter rideg, √©rzelemmentes vezet≈ëje.</li>
                    <li><strong>Pl√°t√≥ (fazekas), Michelangelo (sz√©kl√°bfarag√≥), √©s m√°s "b≈±n√∂s√∂k".</strong></li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>A tudom√°ny mindenhat√≥s√°ga, teljes racionalit√°s, k√∂zj√≥, hasznoss√°g. Az egy√©ni v√°gyak, √©rzelmek, m≈±v√©szetek kiiktat√°sa. ("Nincsenek orsz√°gok, haza, csak a telepek vannak." - a jegyzeteidb≈ël egy ide ill≈ë gondolat, ami az individualit√°s √©s a hagyom√°nyos k√∂tel√©kek megsz≈±n√©s√©re utal, hasonl√≥an Orwell *1984* diszt√≥pi√°j√°hoz.)</p>
                <h5>Cselekm√©ny √©s konfliktus:</h5>
                <p>√Åd√°m egy t√∂k√©letesen szab√°lyozott, de l√©lektelen vil√°gba √©rkezik. Az individualit√°s, a m≈±v√©szet, a szerelem √©s a csal√°d ki√ºresedik vagy megsz≈±nik a "hasznoss√°g" nev√©ben. A "b≈±n√∂s√∂ket" (akik √©rzelmeket mutatnak, √∂n√°ll√≥an gondolkodnak, vagy "haszontalann√°" v√°lnak) a rendszer kegyetlen√ºl megb√ºnteti vagy kiiktatja (pl. lantot k√©sz√≠t≈ë f√©rfi megvessz≈ëz√©se; gyermekeit dajk√°l√≥ anya k√≥rh√°zba z√°r√°sa; mer√©szen gondolkod√≥ ifj√∫ s√∂t√©tben koplaltat√°sa; munkak√©ptelen agg megm√©rgez√©se). Pl√°t√≥nak bors√≥n kell t√©rdepelnie, ha "fell√°zad", Michelangel√≥nak sz√©kl√°bat kell faragnia.</p>
                <p class="quote">A Tud√≥s a zsenikr≈ël: "El≈ëvigy√°zatunk r√©g gondoskodott, / Hogy ne teremjen t√∂bb√© a vil√°gon / Luther, Cassius, Brutus √©s hasonl√≥ / K√≥ros fej√º, kik rend√ºnket zavarj√°k... a beteg / Csir√°t sz√ºlet√©sekor m√°r elnyomom."</p>
                <h5>√Åd√°m felismer√©se/v√°gya a sz√≠n v√©g√©n:</h5>
                <p>√Åd√°m sz√°m√°ra ez a vil√°g elviselhetetlen. Felismeri, hogy az emberi l√©t l√©nyege a t√∂k√©letlens√©gben, szenved√©lyekben, k√ºzdelemben rejlik. Undorodik a hideg racionalit√°st√≥l, √©s visszav√°gyik egy term√©szetesebb, b√°r k√ºzdelmesebb √©letform√°ba. Ez vezeti az ≈∞r fel√©.</p>
            </div>

            <div id="content-ur" class="scene-content-item">
                <h4>13. Sz√≠n: Az ≈∞rben</h4>
                <p><strong>Helysz√≠n:</strong> A vil√°g≈±r, √Åd√°m √©s Lucifer elszakadnak a F√∂ldt≈ël.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>√Åd√°m:</strong> K√©ts√©gbeesetten keresi a l√©t v√©gs≈ë √©rtelm√©t, az Abszol√∫tumot.</li>
                    <li><strong>Lucifer:</strong> G√∫nyosan √©s szkeptikusan k√≠s√©ri √Åd√°mot, pr√≥b√°lja megfosztani minden ill√∫zi√≥j√°t√≥l.</li>
                    <li><strong>A F√∂ld Szellem√©nek hangja:</strong> Megsz√≥l√≠tja √Åd√°mot, figyelmezteti az elszakad√°s vesz√©lyeire.</li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>Az ember v√°gya a transzcendenci√°ra, a v√©gs≈ë tud√°sra. Az anyagt√≥l val√≥ elszakad√°s, a tiszta szellemis√©g keres√©se √©s annak vesz√©lyei. A f√∂ldi l√©t korl√°tai √©s √©rt√©kei.</p>
                <h5>Cselekm√©ny √©s konfliktus:</h5>
                <p>A Falanszterb≈ël ki√°br√°ndulva √Åd√°m a tiszta szellem vil√°g√°ba, az Abszol√∫tumhoz v√°gyik. Luciferrel egyre t√°volabb ker√ºlnek a F√∂ldt≈ël. √Åd√°m kezdetben felszabadultnak √©rzi mag√°t, de ahogy t√°volodik, √∫gy √©rzi a hidegs√©get, a mag√°nyt √©s a semmit. A F√∂ld Szelleme visszah√≠vja, figyelmeztetve, hogy az ember csak a F√∂ldh√∂z k√∂tve, az anyagban √©lhet √©s k√ºzdhet. (A jegyzeteidb≈ël: "√Åd√°m csak √©rinti az idegen vil√°got, csak egy pillanatra megmerev√ºl, viszont ut√°na vissza tudja lehelni a F√∂ldre.") Lucifer szerint a szellem csak az anyagban nyilv√°nulhat meg. √Åd√°m r√°j√∂n, hogy a tiszta szellemis√©g sz√°m√°ra el√©rhetetlen √©s embertelen.</p>
                <h5>√Åd√°m felismer√©se/v√°gya a sz√≠n v√©g√©n:</h5>
                <p>√Åd√°m bel√°tja, hogy az ember sorsa a F√∂ldh√∂z k√∂t√∂tt. A transzcendencia v√°gya helyett visszav√°gyik a f√∂ldi k√ºzdelmekhez, az anyaghoz, az √©lethez. Elfogadja az emberi l√©t korl√°tait, de tov√°bbra is keresi a fejl≈ëd√©s √©s a rem√©ny lehet≈ës√©g√©t.</p>
            </div>

            <div id="content-eszkimo" class="scene-content-item">
                <h4>14. Sz√≠n: Az eszkim√≥k f√∂ldj√©n</h4>
                <p><strong>Helysz√≠n:</strong> A j√©g √©s h√≥ birodalma, a kihal√≥f√©lben l√©v≈ë emberis√©g utols√≥ mened√©ke.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>√Åd√°m:</strong> Id≈ës, meggy√∂t√∂rt emberk√©nt √©rkezik.</li>
                    <li><strong>√âva:</strong> Eszkim√≥ n≈ëk√©nt jelenik meg, a fajfenntart√°s utols√≥ rem√©nye.</li>
                    <li><strong>Lucifer:</strong> √Åd√°m k√≠s√©r≈ëje.</li>
                    <li><strong>Eszkim√≥ f√©rfi:</strong> A durva, t√∫l√©l√©s√©rt k√ºzd≈ë ember t√≠pusa.</li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>Az emberis√©g teljes fizikai √©s szellemi le√©p√ºl√©se. A puszta l√©tfenntart√°s√©rt folytatott k√ºzdelem, az ide√°lok √©s a magasabb rend≈± c√©lok elveszt√©se. A darwini determinizmus (a jegyzeteidb≈ël: "P√°rhuzamos elm√©lete jelenik meg -> a t√°pl√°l√©kl√°nc gondolata (Charles Darwin)").</p>
                <h5>Cselekm√©ny √©s konfliktus:</h5>
                <p>A F√∂ld egy haldokl√≥ bolyg√≥, amelyet j√©g bor√≠t. Az emberis√©g marad√©ka az eszkim√≥k k√©p√©ben a legalapvet≈ëbb √∂szt√∂n√∂k√©rt (√©lelem, fajfenntart√°s) k√ºzd. (A jegyzeteidb≈ël: "A tud√≥sok elm√©letei -> nem siker√ºlt p√≥tolni a napenergi√°t. Az emberis√©g az eszkim√≥k√©pvisel≈ëi.") Az erk√∂lcs, a tudom√°ny, a m≈±v√©szet teljesen elt≈±nt. Az ember "fajilag, erk√∂lcsileg √©s szellemileg le√©p√ºlt, √©s visszatasz√≠t√≥v√° v√°lt." Az utols√≥ n≈ë (√âva) egy eszkim√≥ f√©rfihoz akarja adni mag√°t a fajfenntart√°s√©rt, ami v√©gk√©pp elkeser√≠ti √Åd√°mot.</p>
                <h5>√Åd√°m felismer√©se/√°llapota a sz√≠n v√©g√©n:</h5>
                <p>√Åd√°m sz√°m√°ra ez a v√©gs≈ë √©s legm√©lyebb ki√°br√°ndul√°s. Minden, ami√©rt az emberis√©g kor√°bban k√ºzd√∂tt, semmiv√© lett. A fejl≈ëd√©s √©s a halad√°s ill√∫zi√≥ja szertefoszlik. √ögy √©rzi, minden k√ºzdelem hi√°baval√≥ volt. Ezzel az √©rz√©ssel √©bred fel √°lm√°b√≥l a k√∂vetkez≈ë, utols√≥ sz√≠nben.</p>
            </div>

            <div id="content-paradicsomonkivul_utan" class="scene-content-item">
                <h4>15. Sz√≠n: A Paradicsomon k√≠v√ºl (√Ålom ut√°n)</h4>
                <p><strong>Helysz√≠n:</strong> Ugyanaz a kop√°r t√°j, mint a 3. sz√≠nben.</p>
                <h5>Szerepl≈ëk:</h5>
                <ul>
                    <li><strong>√Åd√°m:</strong> Fel√©bred az √°lomb√≥l, m√©lys√©gesen k√©ts√©gbeesett √©s ki√°br√°ndult.</li>
                    <li><strong>√âva:</strong> Fel√©bred, √©s √∫j rem√©nyt hoz.</li>
                    <li><strong>Lucifer:</strong> Utols√≥ k√≠s√©rleteket tesz √Åd√°m teljes elcs√ºggeszt√©s√©re.</li>
                    <li><strong>Az √ör hangja:</strong> A v√©gs≈ë √∫tmutat√°st adja.</li>
                </ul>
                <h5>K√∂zponti eszme:</h5>
                <p>Az emberi l√©t √©rtelm√©nek v√©gs≈ë k√©rd√©se. A szabad akarat vs. determinizmus. A k√ºzdelem √©s a hit sz√ºks√©gess√©ge a teljes tud√°s hi√°ny√°ban is. Az √©let tov√°bbad√°s√°nak, a j√∂v≈ënek a fontoss√°ga.</p>
                <h5>Cselekm√©ny √©s konfliktus (a jegyzeteid alapj√°n is):</h5>
                <p>√Åd√°m fel√©bredve √∫gy √©rzi, az √©let hi√°baval√≥, √©s √∂ngyilkoss√°gra k√©sz√ºl, hogy v√©get vessen az emberis√©g √©rtelmetlennek t≈±n≈ë t√∂rt√©net√©nek. (A jegyzeteidb≈ël: "√Åd√°m ekkor akar √∂ngyilkos lenni (F√∂ldt≈ël val√≥ elszakad√°s)" - b√°r ez ink√°bb az √°lombeli √©rz√©s, a k√∂vetkezm√©nye az √∂ngyilkoss√°gi sz√°nd√©k.)</p>
                <p>Lucifer tov√°bb er≈ës√≠ti k√©ts√©geit (a jegyzeteidb≈ël):</p>
                <ul>
                    <li>Felveti a **szabad akarat k√©rd√©s√©t**, azzal √©rvelve, hogy az egyes ember akarata lehet szabad, de az emberis√©g sorsa ("az eg√©sz nem hordja l√°ncait", "az eg√©sz emberis√©g sorsa meghat√°rozott") determin√°lt, √©s az egy√©ni k√ºzdelem hi√°baval√≥ ("L√©gy-egyenl≈ës√©g" hasonlat).</li>
                    <li>Hangs√∫lyozza a **mor√°l relativit√°s√°t** √©s a **nagy sz√°mok t√∂rv√©ny√©t**, ami szerint az egy√©ni er√©ny vagy b≈±n jelent√©ktelen a t√∂megek mozg√°s√°ban.</li>
                </ul>
                <p>(A jegyzeteidb≈ël a felismer√©s Lucifer szavaira: "Lucifer g√∫nyol√≥d√≥ szavaira hat√°rozottan fogalmazza meg a felismer√©st: a k√ºzdelem fontoss√°g√°t, s ezt megfelel az emberi √©letben." √©s "Az emberi k√ºzd√©s v√©geredm√©nye lehet k√©ts√©ges, az erk√∂lcsi √©rt√©kek √∂r√∂kre roskant k√©ts√©gtelen.")</p>
                <p>√âva ekkor fel√©bred, √©s bejelenti, hogy gyermeket v√°r (a jegyzeteidb≈ël: "'Any√°nak √©rzem √≥h √Åd√°m magam'"). Ez az √∫j √©let rem√©nye megv√°ltoztatja √Åd√°m sz√°nd√©k√°t.</p>
                <p>√Åd√°m v√©gs≈ë k√©rd√©seivel az √örhoz fordul (a jegyzeteidb≈ël √©s a m≈±b≈ël):</p>
                <p class="quote">"Uram... Mondd meg nekem, mi v√©gre termek √©n? / V√©gz≈ëdik-e a f√∂ldi p√°lya h√°t / Nagy c√©l fel√©, vagy ≈ër√ºlt l√©tre lett / K√°rhoztatva k√∂rben vissza sz√°llni?... Mi a jutalma a nemes kebelnek... S mi a gonosznak b√ºntet√©se v√©gre?"</p>
                <p>(A jegyzeteidb≈ël a k√©rd√©sek l√©nyege: "Van-e √©let a hal√°l ut√°n? Fog-e fejl≈ëdni az emberis√©g? Meg√©ri-e k√ºzdeni a n√©p√©rt? Ki fogja ≈ët a helyes √∫ton tartani?")</p>
                <h5>Az √ör v√°lasza √©s a m≈± befejez√©se:</h5>
                <p>Az √ör nem ad konkr√©t v√°laszokat a v√©gs≈ë c√©lokra, de hangs√∫lyozza az ember feladat√°t:</p>
                <p class="quote">"Mondottam, ember: k√ºzdj √©s b√≠zva b√≠zz√°l!"</p>
                <p>A m≈± ezzel a nyitott, de rem√©nyt ad√≥ felsz√≥l√≠t√°ssal z√°rul, amely az emberi k√ºzdelem √©rtelm√©t mag√°ban a k√ºzdelemben √©s a hitben jel√∂li meg, m√©g ha a v√©gs≈ë c√©lok √©s a teljes tud√°s nem is el√©rhet≈ëek.</p>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
    <script>
        let currentView = 'mapView';
        let map;
        let mapInitialized = false;

        const sceneData = { // Adatstrukt√∫ra a c√≠mekhez √©s a tartalmakhoz
            'menny': { title: '1. Sz√≠n: A Mennyben' },
            'paradicsom': { title: '2. Sz√≠n: A Paradicsomban' },
            'paradicsomonkivul_elom': { title: '3. Sz√≠n: A Paradicsomon k√≠v√ºl (√Ålom el≈ëtt)' },
            'egyiptom': { title: '4. Sz√≠n: Egyiptom' },
            'athen': { title: '5. Sz√≠n: Ath√©n' },
            'roma': { title: '6. Sz√≠n: R√≥ma' },
            'konstantinapoly': { title: '7. Sz√≠n: Konstantin√°poly' },
            'praga1': { title: '8. Sz√≠n: Pr√°ga I.' },
            'parizs': { title: '9. Sz√≠n: P√°rizs' },
            'praga2': { title: '10. Sz√≠n: Pr√°ga II.' },
            'london': { title: '11. Sz√≠n: London' },
            'falanszter': { title: '12. Sz√≠n: A Falanszter' },
            'ur': { title: '13. Sz√≠n: Az ≈∞rben' },
            'eszkimo': { title: '14. Sz√≠n: Az eszkim√≥k f√∂ldj√©n' },
            'paradicsomonkivul_utan': { title: '15. Sz√≠n: A Paradicsomon k√≠v√ºl (√Ålom ut√°n)' }
        };

        const sceneLocations = [
            // Hozz√°vet≈ëleges koordin√°t√°k. A Paradicsom helye szimbolikus.
            { key: 'paradicsom', name: 'Paradicsom (2. sz√≠n)', coords: [31.7683, 35.2137], zoom: 7 }, // Jeruzs√°lem k√∂rny√©ke szimbolikusan
            { key: 'paradicsomonkivul_elom', name: 'Paradicsomon k√≠v√ºl (3. & 15. sz√≠n)', coords: [31.5, 35.0], zoom: 7 }, // K√∂zel a Paradicsomhoz
            { key: 'egyiptom', name: 'Egyiptom (4. sz√≠n)', coords: [26.8206, 30.8025], zoom: 5 }, // Egyiptom k√∂zepe
            { key: 'athen', name: 'Ath√©n (5. sz√≠n)', coords: [37.9838, 23.7275], zoom: 6 },
            { key: 'roma', name: 'R√≥ma (6. sz√≠n)', coords: [41.9028, 12.4964], zoom: 6 },
            { key: 'konstantinapoly', name: 'Konstantin√°poly (7. sz√≠n)', coords: [41.0082, 28.9784], zoom: 6 },
            { key: 'praga1', name: 'Pr√°ga (8. & 10. sz√≠n)', coords: [50.0755, 14.4378], zoom: 6 }, // Pr√°ga I √©s II ugyanaz a helysz√≠n
            { key: 'parizs', name: 'P√°rizs (9. sz√≠n)', coords: [48.8566, 2.3522], zoom: 6 },
            { key: 'london', name: 'London (11. sz√≠n)', coords: [51.5074, 0.1278], zoom: 6 },
            // Falanszter helye absztrakt, lehetne b√°rhol a j√∂v≈ëben
            { key: 'falanszter', name: 'Falanszter (12. sz√≠n)', coords: [47.0, 19.0], zoom: 4, note: "Helysz√≠n szimbolikus" }, // Magyarorsz√°g k√∂zepe szimbolikusan
            { key: 'eszkimo', name: 'Eszkim√≥k f√∂ldje (14. sz√≠n)', coords: [75.0, -100.0], zoom: 3 } // √âszak-Kanada/Gr√∂nland r√©gi√≥
        ];

        function initializeMap() {
            if (!mapInitialized) {
                map = L.map('interactiveMap').setView([48.0, 15.0], 4); // Eur√≥pa k√∂zpont√∫ n√©zet

                L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                    attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors ¬© <a href="https://carto.com/attributions">CARTO</a>',
                    subdomains: 'abcd',
                    maxZoom: 19
                }).addTo(map);

                const locationsContainer = document.getElementById('locations');
                locationsContainer.innerHTML = ''; // Clear previous buttons if any

                // Add markers for scenes with coordinates
                sceneLocations.forEach(location => {
                    const marker = L.marker(location.coords).addTo(map);
                    let tooltipText = location.name;
                    if (location.note) tooltipText += ` (${location.note})`;
                    marker.bindTooltip(tooltipText);
                    marker.on('click', () => {
                        showSceneDetails(location.key);
                    });
                });
                 // Add buttons for scenes without map markers
                Object.keys(sceneData).forEach(key => {
                    if (!sceneLocations.some(loc => loc.key === key)) {
                        const button = document.createElement('button');
                        button.textContent = sceneData[key].title + (sceneData[key].mapNote || " (Nincs t√©rk√©pjel√∂l≈ë)");
                        button.onclick = () => showSceneDetails(key);
                        locationsContainer.appendChild(button);
                    }
                });

                mapInitialized = true;
            }
        }

        function showView(viewId) {
            document.getElementById('mapView').style.display = 'none';
            document.getElementById('timelineView').style.display = 'none';
            document.getElementById('sceneDetailView').style.display = 'none';
            document.getElementById(viewId).style.display = 'block';
            currentView = viewId;

            if (viewId === 'mapView') {
                initializeMap();
                if (map) {
                    setTimeout(() => { map.invalidateSize() }, 10); // Kisebb k√©sleltet√©s
                }
            }
        }

        function showSceneDetails(sceneKey) {
            const sceneContentHTML = document.getElementById('content-' + sceneKey)?.innerHTML;
            const sceneTitle = sceneData[sceneKey]?.title || "Ismeretlen Sz√≠n";

            if (!sceneContentHTML) {
                console.error("Nincs tartalom ehhez a sz√≠nhez:", sceneKey);
                document.getElementById('sceneTitleDetail').innerText = sceneTitle;
                document.getElementById('sceneContentDetail').innerHTML = "<p>A tartalom hamarosan el√©rhet≈ë lesz...</p>";
            } else {
                document.getElementById('sceneTitleDetail').innerText = sceneTitle;
                document.getElementById('sceneContentDetail').innerHTML = sceneContentHTML;
            }

            document.getElementById('mapView').style.display = 'none';
            document.getElementById('timelineView').style.display = 'none';
            document.getElementById('sceneDetailView').style.display = 'block';
            window.scrollTo(0, 0); // Scroll to top of detail view
        }

        function goBack() {
            document.getElementById('sceneDetailView').style.display = 'none';
            document.getElementById(currentView).style.display = 'block';
            if (currentView === 'mapView' && map) {
                 setTimeout(() => { map.invalidateSize() }, 10);
            }
             // Stop any ongoing speech synthesis
            if (window.speechSynthesis && window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }
            // Reset audio player
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.src = '';

        }

        function speakSceneContent() {
            // This function will call your backend
            const contentDiv = document.getElementById('sceneContentDetail');
            if (!contentDiv) return;

            // Extract relevant text, try to make it more speakable
            let textToSpeak = "";
            textToSpeak += (document.getElementById('sceneTitleDetail')?.innerText || "") + ". ";

            contentDiv.querySelectorAll('h5, p, li, .quote').forEach(el => {
                let text = el.innerText || el.textContent;
                // Simple cleanup
                text = text.replace(/(\r\n|\n|\r)/gm, " ").replace(/\s+/g, ' ').trim();
                if (el.tagName === 'H5') text = el.innerText + ": ";
                textToSpeak += text + ". ";
            });

            console.log("Elk√ºldend≈ë sz√∂veg a backendnek:", textToSpeak);
            alert("Ez a funkci√≥ egy backend szervert ig√©nyel a Google Cloud TTS API h√≠v√°s√°hoz. A sz√∂veg a konzolon l√°that√≥.");

            // === proba backend call ===
            // const backendUrl = 'http://localhost:3000/synthesize-speech'; // A te backend URL-ed
            // fetch(backendUrl, {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //     },
            //     body: JSON.stringify({ text: textToSpeak, lang: 'hu-HU' }) // K√ºldhetn√©l nyelvi k√≥dot is
            // })
            // .then(response => {
            //     if (!response.ok) {
            //         throw new Error(`Network response was not ok: ${response.statusText}`);
            //     }
            //     return response.blob(); // Vagy response.json() ha a backend base64 k√≥dolt audi√≥t k√ºld
            // })
            // .then(audioBlob => {
            //     const audioUrl = URL.createObjectURL(audioBlob);
            //     const audioPlayer = document.getElementById('audioPlayer');
            //     audioPlayer.src = audioUrl;
            //     audioPlayer.play();
            // })
            // .catch(error => {
            //     console.error('Hiba t√∂rt√©nt a TTS API h√≠v√°sa sor√°n:', error);
            //     alert('Hiba t√∂rt√©nt a felolvas√°s k√∂zben. N√©zd meg a konzolt.');
            // });
        }

        document.addEventListener('DOMContentLoaded', () => {
            showView('mapView');
        });
    </script>
</body>
</html>